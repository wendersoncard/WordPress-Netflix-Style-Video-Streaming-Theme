jQuery(document).ready(function(a){function b(){a(".chosen-container").each(function(){a(this).attr("style","width: 100%")})}a(".s3bubble-meta-datepicker").datepicker(),a("#streamium-add-repeater-row").live("click",function(){return a("#repeatable-fieldset-one").append('<li><div class="streamium-repeater-left"><p><label>Video Image</label><input type="hidden" class="widefat" name="thumbnails[]" /><img src="http://placehold.it/260x146" /><input class="streamium_upl_button button" type="button" value="Upload Image" /></p></div><div class="streamium-repeater-right"><p><label>Video Season</label><select class="widefat" tabindex="1" name="seasons[]"><option value="1">Season 1</option><option value="2">Season 2</option><option value="3">Season 3</option><option value="4">Season 4</option><option value="5">Season 5</option><option value="6">Season 6</option><option value="7">Season 7</option><option value="8">Season 8</option><option value="9">Season 9</option><option value="10">Season 10</option><option value="11">Season 11</option><option value="12">Season 12</option></select></p><p><label>Video List Position</label><input type="text" class="widefat" name="positions[]" onkeypress="return event.charCode >= 48 && event.charCode <= 57" value="1" /></p><p><label>Video Code</label><select class="streamium-theme-episode-select chosen-select" tabindex="1" name="codes[]"></select></p><p><label>Alternative Service Url (This will overwrite the S3Bubble AWS video)</label><input type="text" class="widefat" name="service[]" placeholder="Enter a full vimeo or youtube url" /></p><p><label>Video Title</label><input type="text" class="widefat" name="titles[]" placeholder="Enter video title" /></p><p><label>Video Description</label><textarea rows="4" cols="50" class="widefat" name="descriptions[]" placeholder="Enter video description"></textarea></p><a class="button streamium-repeater-remove-row" href="#">Remove</a></div></li>'),!1}),a(".streamium-repeater-remove-row").live("click",function(){var b=a(this),c=b.data("index"),d=b.data("pid");return 1==confirm("Please confirm you would like to delete this video from your series this is not reversible")&&a.ajax({type:"POST",dataType:"json",url:streamium_meta_object.ajax_url,data:{action:"streamium_admin_series_remove_video",postId:d,index:c},success:function(a){a.error||b.parents("li").remove()},error:function(a){console.log(a)}}),!1}),a(".streamium_upl_button").live("click",function(){var b=a(this),c=b.prev().prev(),d=b.prev(),e=wp.media.editor.send.attachment;return wp.media.editor.send.attachment=function(f,g){c.attr("value",g.url),d.attr("src",g.url),wp.media.editor.send.attachment=e,a("html, body").animate({scrollTop:b.offset().top-200},500)},wp.media.editor.open(),!1}),function b(){a.post(streamium_meta_object.api+"/api/codes",{website:streamium_meta_object.connected_website},function(b){function c(a){var b=a.replace(/\//gi," ");return b=b.replace(/-/gi," "),b=b.toLowerCase()}if(b.error)return void a(".streamium-theme-select-group").html("<div class='streamium-current-url-error'>"+b.message+"</div>");var d="";a.each(b.results,function(a,b){var e=b.code,f=(b.bucket,b.key),g=(b.title,b.ext);b.type;"m3u8"===g&&(d+='<option id="'+e+'"  value="'+e+'">'+c(f)+" "+e+"</option>"),"mp4"!==g&&"m4v"!==g&&"mp3"!==g||(d+='<option id="'+e+'"  value="'+e+'">'+c(f)+" "+e+"</option>")}),d+="",a(".streamium-theme-main-video-select-group").append(d),a(".streamium-theme-video-trailer-select-group").append(d),a(".streamium-theme-featured-video-select-group").append(d),a(".streamium-theme-episode-select").append(d);var e={".chosen-select":{search_contains:!0},".chosen-select-deselect":{allow_single_deselect:!0},".chosen-select-no-single":{disable_search_threshold:10},".chosen-select-no-results":{no_results_text:"Oops, nothing found!"},".chosen-select-width":{width:"95%"}};for(var f in e)a(f).chosen(e[f])},"json"),a(".add-program-row").on("click",function(){b()})}(),b(),a(window).on("resize",b)});